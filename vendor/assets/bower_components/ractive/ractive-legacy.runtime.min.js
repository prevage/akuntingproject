!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Ractive=e()}(this,function(){"use strict";function t(t){var e;if(t&&"boolean"!=typeof t)return"undefined"!=typeof window&&document&&t?t.nodeType?t:"string"==typeof t&&(e=document.getElementById(t),!e&&document.querySelector&&(e=document.querySelector(t)),e&&e.nodeType)?e:t[0]&&t[0].nodeType?t[0]:null:null}function e(t){return t&&"unknown"!=typeof t.parentNode&&t.parentNode&&t.parentNode.removeChild(t),t}function n(t){return null!=t&&t.toString?t:""}function i(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;e>i;i++)n[i-1]=arguments[i];for(var r,o;o=n.shift();)for(r in o)Ps.call(o,r)&&(t[r]=o[r]);return t}function r(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;e>i;i++)n[i-1]=arguments[i];return n.forEach(function(e){for(var n in e)!e.hasOwnProperty(n)||n in t||(t[n]=e[n])}),t}function o(t){return"[object Array]"===Rs.call(t)}function s(t){return Ns.test(Rs.call(t))}function a(t,e){return null===t&&null===e?!0:"object"==typeof t||"object"==typeof e?!1:t===e}function u(t){return!isNaN(parseFloat(t))&&isFinite(t)}function h(t){return t&&"[object Object]"===Rs.call(t)}function c(t,e){return t.replace(/%s/g,function(){return e.shift()})}function l(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;e>i;i++)n[i-1]=arguments[i];throw t=c(t,n),new Error(t)}function f(){Pv.DEBUG&&Ts.apply(null,arguments)}function d(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;e>i;i++)n[i-1]=arguments[i];t=c(t,n),Fs(t,n)}function p(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;e>i;i++)n[i-1]=arguments[i];t=c(t,n),Ls[t]||(Ls[t]=!0,Fs(t,n))}function m(){Pv.DEBUG&&d.apply(null,arguments)}function v(){Pv.DEBUG&&p.apply(null,arguments)}function g(t,e,n){var i=y(t,e,n);return i?i[t][n]:null}function y(t,e,n){for(;e;){if(n in e[t])return e;if(e.isolated)return null;e=e.parent}}function b(t){return function(){return t}}function w(t){var e,n,i,r,o,s;for(e=t.split("."),(n=Qs[e.length])||(n=k(e.length)),o=[],i=function(t,n){return t?"*":e[n]},r=n.length;r--;)s=n[r].map(i).join("."),o.hasOwnProperty(s)||(o.push(s),o[s]=!0);return o}function k(t){var e,n,i,r,o,s,a,u,h="";if(!Qs[t]){for(i=[];h.length<t;)h+=1;for(e=parseInt(h,2),r=function(t){return"1"===t},o=0;e>=o;o+=1){for(n=o.toString(2);n.length<t;)n="0"+n;for(u=[],a=n.length,s=0;a>s;s++)u.push(r(n[s]));i[o]=u}Qs[t]=i}return Qs[t]}function E(t,e,n,i){var r=t[e];if(!r||!r.equalsOrStartsWith(i)&&r.equalsOrStartsWith(n))return t[e]=r?r.replace(n,i):i,!0}function x(t){var e=t.slice(2);return"i"===t[1]&&u(e)?+e:e}function _(t){return null==t?t:(Ks.hasOwnProperty(t)||(Ks[t]=new Gs(t)),Ks[t])}function A(t,e){function n(e,n){var i,r,s;return n.isRoot?s=[].concat(Object.keys(t.viewmodel.data),Object.keys(t.viewmodel.mappings),Object.keys(t.viewmodel.computations)):(i=t.viewmodel.wrapped[n.str],r=i?i.get():t.viewmodel.get(n),s=r?Object.keys(r):null),s&&s.forEach(function(t){"_ractive"===t&&o(r)||e.push(n.join(t))}),e}var i,r,s;for(i=e.str.split("."),s=[Ys];r=i.shift();)"*"===r?s=s.reduce(n,[]):s[0]===Ys?s[0]=_(r):s=s.map(C(r));return s}function C(t){return function(e){return e.join(t)}}function O(t){return t?t.replace(zs,".$1"):""}function S(t,e,n){if("string"!=typeof e||!u(n))throw new Error("Bad arguments");var i=void 0,r=void 0;if(/\*/.test(e))return r={},A(t,_(O(e))).forEach(function(e){var i=t.viewmodel.get(e);if(!u(i))throw new Error(Zs);r[e.str]=i+n}),t.set(r);if(i=t.get(e),!u(i))throw new Error(Zs);return t.set(e,+i+n)}function T(t,e){return Js(this,t,void 0===e?1:+e)}function F(t){this.event=t,this.method="on"+t,this.deprecate=ia[t]}function j(t,e){var n=t.indexOf(e);-1===n&&t.push(e)}function P(t,e){for(var n=0,i=t.length;i>n;n++)if(t[n]==e)return!0;return!1}function R(t,e){var n;if(!o(t)||!o(e))return!1;if(t.length!==e.length)return!1;for(n=t.length;n--;)if(t[n]!==e[n])return!1;return!0}function N(t){return"string"==typeof t?[t]:void 0===t?[]:t}function L(t){return t[t.length-1]}function V(t,e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}function I(t){for(var e=[],n=t.length;n--;)e[n]=t[n];return e}function D(t){setTimeout(t,0)}function M(t,e){return function(){for(var n;n=t.shift();)n(e)}}function U(t,e,n,i){var r;if(e===t)throw new TypeError("A promise's fulfillment handler cannot return the same promise");if(e instanceof ra)e.then(n,i);else if(!e||"object"!=typeof e&&"function"!=typeof e)n(e);else{try{r=e.then}catch(o){return void i(o)}if("function"==typeof r){var s,a,u;a=function(e){s||(s=!0,U(t,e,n,i))},u=function(t){s||(s=!0,i(t))};try{r.call(e,a,u)}catch(o){if(!s)return i(o),void(s=!0)}}else n(e)}}function B(t,e,n){var i;return e=O(e),"~/"===e.substr(0,2)?(i=_(e.substring(2)),Q(t,i.firstKey,n)):"."===e[0]?(i=q(ca(n),e),i&&Q(t,i.firstKey,n)):i=W(t,_(e),n),i}function q(t,e){var n;if(void 0!=t&&"string"!=typeof t&&(t=t.str),"."===e)return _(t);if(n=t?t.split("."):[],"../"===e.substr(0,3)){for(;"../"===e.substr(0,3);){if(!n.length)throw new Error('Could not resolve reference - too many "../" prefixes');n.pop(),e=e.substring(3)}return n.push(e),_(n.join("."))}return _(t?t+e.replace(/^\.\//,"."):e.replace(/^\.\/?/,""))}function W(t,e,n,i){var r,o,s,a,u;if(e.isRoot)return e;for(o=e.firstKey;n;)if(r=n.context,n=n.parent,r&&(a=!0,s=t.viewmodel.get(r),s&&("object"==typeof s||"function"==typeof s)&&o in s))return r.join(e.str);return z(t.viewmodel,o)?e:t.parent&&!t.isolated&&(a=!0,n=t.component.parentFragment,o=_(o),u=W(t.parent,o,n,!0))?(t.viewmodel.map(o,{origin:t.parent.viewmodel,keypath:u}),e):i||a?void 0:(t.viewmodel.set(e,void 0),e)}function Q(t,e){var n;!t.parent||t.isolated||z(t.viewmodel,e)||(e=_(e),(n=W(t.parent,e,t.component.parentFragment,!0))&&t.viewmodel.map(e,{origin:t.parent.viewmodel,keypath:n}))}function z(t,e){return""===e||e in t.data||e in t.computations||e in t.mappings}function H(t){t.teardown()}function K(t){t.unbind()}function G(t){t.unrender()}function $(t){t.cancel()}function Y(t){t.detach()}function J(t){t.detachNodes()}function Z(t){!t.ready||t.outros.length||t.outroChildren||(t.outrosComplete||(t.parent?t.parent.decrementOutros(t):t.detachNodes(),t.outrosComplete=!0),t.intros.length||t.totalChildren||("function"==typeof t.callback&&t.callback(),t.parent&&t.parent.decrementTotal()))}function X(){for(var t,e,n;da.ractives.length;)e=da.ractives.pop(),n=e.viewmodel.applyChanges(),n&&ga.fire(e,n);for(tt(),t=0;t<da.views.length;t+=1)da.views[t].update();for(da.views.length=0,t=0;t<da.tasks.length;t+=1)da.tasks[t]();return da.tasks.length=0,da.ractives.length?X():void 0}function tt(){var t,e,n,i;for(t=va.length;t--;)e=va[t],e.keypath?va.splice(t,1):(n=la(e.root,e.ref,e.parentFragment))&&((i||(i=[])).push({item:e,keypath:n}),va.splice(t,1));i&&i.forEach(et)}function et(t){t.item.resolve(t.keypath)}function nt(t,e,n){var i,r,o,s,a,u,h,c,l,f,d,p,m,v;if(i=new ha(function(t){return r=t}),"object"==typeof t){n=e||{},u=n.easing,h=n.duration,a=[],c=n.step,l=n.complete,(c||l)&&(d={},n.step=null,n.complete=null,f=function(t){return function(e,n){d[t]=n}});for(o in t)t.hasOwnProperty(o)&&((c||l)&&(p=f(o),n={easing:u,duration:h},c&&(n.step=p)),n.complete=l?p:xs,a.push(it(this,o,t[o],n)));return v={easing:u,duration:h},c&&(v.step=function(t){return c(t,d)}),l&&i.then(function(t){return l(t,d)}),v.complete=r,m=it(this,null,null,v),a.push(m),i.stop=function(){for(var t;t=a.pop();)t.stop();m&&m.stop()},i}return n=n||{},n.complete&&i.then(n.complete),n.complete=r,s=it(this,t,e,n),i.stop=function(){return s.stop()},i}function it(t,e,n,i){var r,o,s,u;return e&&(e=_(O(e))),null!==e&&(u=t.viewmodel.get(e)),ka.abort(e,t),a(u,n)?(i.complete&&i.complete(i.to),Aa):(i.easing&&(r="function"==typeof i.easing?i.easing:t.easing[i.easing],"function"!=typeof r&&(r=null)),o=void 0===i.duration?400:i.duration,s=new xa({keypath:e,from:u,to:n,root:t,duration:o,easing:r,interpolator:i.interpolator,step:i.step,complete:i.complete}),ka.add(s),t._animations.push(s),s)}function rt(){return this.detached?this.detached:(this.el&&V(this.el.__ractive_instances__,this),this.detached=this.fragment.detach(),Oa.fire(this),this.detached)}function ot(t){return this.el?this.fragment.find(t):null}function st(t,e){var n;return n=this._isComponentQuery?!this.selector||t.name===this.selector:t.node?fs(t.node,this.selector):null,n?(this.push(t.node||t.instance),e||this._makeDirty(),!0):void 0}function at(t){var e;return(e=t.parentFragment)?e.owner:t.component&&(e=t.component.parentFragment)?e.owner:void 0}function ut(t){var e,n;for(e=[t],n=at(t);n;)e.push(n),n=at(n);return e}function ht(t,e,n,i){var r=[];return Cs(r,{selector:{value:e},live:{value:n},_isComponentQuery:{value:i},_test:{value:Ta}}),n?(Cs(r,{cancel:{value:Fa},_root:{value:t},_sort:{value:Ra},_makeDirty:{value:Na},_remove:{value:La},_dirty:{value:!1,writable:!0}}),r):r}function ct(t,e){var n,i;return this.el?(e=e||{},n=this._liveQueries,(i=n[t])?e&&e.live?i:i.slice():(i=Va(this,t,!!e.live,!1),i.live&&(n.push(t),n["_"+t]=i),this.fragment.findAll(t,i),i)):[]}function lt(t,e){var n,i;return e=e||{},n=this._liveComponentQueries,(i=n[t])?e&&e.live?i:i.slice():(i=Va(this,t,!!e.live,!0),i.live&&(n.push(t),n["_"+t]=i),this.fragment.findAllComponents(t,i),i)}function ft(t){return this.fragment.findComponent(t)}function dt(t){return this.container?this.container.component&&this.container.component.name===t?this.container:this.container.findContainer(t):null}function pt(t){return this.parent?this.parent.component&&this.parent.component.name===t?this.parent:this.parent.findParent(t):null}function mt(t,e){var n=void 0===arguments[2]?{}:arguments[2];if(e){n.event?n.event.name=e:n.event={name:e,_noArg:!0};var i=_(e).wildcardMatches();vt(t,i,n.event,n.args,!0)}}function vt(t,e,n,i){var r,o,s=void 0===arguments[4]?!1:arguments[4],a=!0;for(Wa.enqueue(t,n),o=e.length;o>=0;o--)r=t._subs[e[o]],r&&(a=gt(t,r,n,i)&&a);if(Wa.dequeue(t),t.parent&&a){if(s&&t.component){var u=t.component.name+"."+e[e.length-1];e=_(u).wildcardMatches(),n&&(n.component=t)}vt(t.parent,e,n,i)}}function gt(t,e,n,i){var r=null,o=!1;n&&!n._noArg&&(i=[n].concat(i)),e=e.slice();for(var s=0,a=e.length;a>s;s+=1)e[s].apply(t,i)===!1&&(o=!0);return n&&!n._noArg&&o&&(r=n.original)&&(r.preventDefault&&r.preventDefault(),r.stopPropagation&&r.stopPropagation()),!o}function yt(t){var e={args:Array.prototype.slice.call(arguments,1)};Qa(this,t,e)}function bt(t){var e;return t=_(O(t)),e=this.viewmodel.get(t,Ka),void 0===e&&this.parent&&!this.isolated&&la(this,t.str,this.component.parentFragment)&&(e=this.viewmodel.get(t)),e}function wt(e,n){if(!this.fragment.rendered)throw new Error("The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.");if(e=t(e),n=t(n)||null,!e)throw new Error("You must specify a valid target to insert into");e.insertBefore(this.detach(),n),this.el=e,(e.__ractive_instances__||(e.__ractive_instances__=[])).push(this),this.detached=null,kt(this)}function kt(t){$a.fire(t),t.findAllComponents("*").forEach(function(t){kt(t.instance)})}function Et(t,e,n){var i,r;return t=_(O(t)),i=this.viewmodel.get(t),o(i)&&o(e)?(r=ya.start(this,!0),this.viewmodel.merge(t,i,e,n),ya.end(),r):this.set(t,e,n&&n.complete)}function xt(t,e){var n,i;return n=A(t,e),i={},n.forEach(function(e){i[e.str]=t.get(e.str)}),i}function _t(t,e,n,i){var r,o,s;e=_(O(e)),i=i||cu,e.isPattern?(r=new uu(t,e,n,i),t.viewmodel.patternObservers.push(r),o=!0):r=new Xa(t,e,n,i),r.init(i.init),t.viewmodel.register(e,r,o?"patternObservers":"observers"),r.ready=!0;var a={cancel:function(){var n;s||(o?(n=t.viewmodel.patternObservers.indexOf(r),t.viewmodel.patternObservers.splice(n,1),t.viewmodel.unregister(e,r,"patternObservers")):t.viewmodel.unregister(e,r,"observers"),s=!0)}};return t._observers.push(a),a}function At(t,e,n){var i,r,o,s;if(h(t)){n=e,r=t,i=[];for(t in r)r.hasOwnProperty(t)&&(e=r[t],i.push(this.observe(t,e,n)));return{cancel:function(){for(;i.length;)i.pop().cancel()}}}if("function"==typeof t)return n=e,e=t,t="",hu(this,t,e,n);if(o=t.split(" "),1===o.length)return hu(this,t,e,n);for(i=[],s=o.length;s--;)t=o[s],t&&i.push(hu(this,t,e,n));return{cancel:function(){for(;i.length;)i.pop().cancel()}}}function Ct(t,e,n){var i=this.observe(t,function(){e.apply(this,arguments),i.cancel()},{init:!1,defer:n&&n.defer});return i}function Ot(t,e){var n,i=this;if(t)n=t.split(" ").map(du).filter(pu),n.forEach(function(t){var n,r;(n=i._subs[t])&&(e?(r=n.indexOf(e),-1!==r&&n.splice(r,1)):i._subs[t]=[])});else for(t in this._subs)delete this._subs[t];return this}function St(t,e){var n,i,r,o=this;if("object"==typeof t){n=[];for(i in t)t.hasOwnProperty(i)&&n.push(this.on(i,t[i]));return{cancel:function(){for(var t;t=n.pop();)t.cancel()}}}return r=t.split(" ").map(du).filter(pu),r.forEach(function(t){(o._subs[t]||(o._subs[t]=[])).push(e)}),{cancel:function(){return o.off(t,e)}}}function Tt(t,e){var n=this.on(t,function(){e.apply(this,arguments),n.cancel()});return n}function Ft(t,e,n){var i,r,o,s,a,u,h=[];if(i=jt(t,e,n),!i)return null;for(r=t.length,a=i.length-2-i[1],o=Math.min(r,i[0]),s=o+i[1],u=0;o>u;u+=1)h.push(u);for(;s>u;u+=1)h.push(-1);for(;r>u;u+=1)h.push(u+a);return h.touchedFrom=0!==a?i[0]:t.length,h}function jt(t,e,n){switch(e){case"splice":for(void 0!==n[0]&&n[0]<0&&(n[0]=t.length+Math.max(n[0],-t.length));n.length<2;)n.push(0);return n[1]=Math.min(n[1],t.length-n[0]),n;case"sort":case"reverse":return null;case"pop":return t.length?[t.length-1,1]:[0,0];case"push":return[t.length,0].concat(n);case"shift":return[0,t.length?1:0];case"unshift":return[0,0].concat(n)}}function Pt(e,n){var i,r,o,s=this;if(o=this.transitionsEnabled,this.noIntro&&(this.transitionsEnabled=!1),i=ya.start(this,!0),ya.scheduleTask(function(){return ju.fire(s)},!0),this.fragment.rendered)throw new Error("You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first");if(e=t(e)||this.el,n=t(n)||this.anchor,this.el=e,this.anchor=n,!this.append&&e){var a=e.__ractive_instances__;a&&a.length&&Rt(a),e.innerHTML=""}return this.cssId&&Tu.apply(),e&&((r=e.__ractive_instances__)?r.push(this):e.__ractive_instances__=[this],n?e.insertBefore(this.fragment.render(),n):e.appendChild(this.fragment.render())),ya.end(),this.transitionsEnabled=o,i.then(function(){return Pu.fire(s)})}function Rt(t){t.splice(0,t.length).forEach(H)}function Nt(t,e){for(var n=t.slice(),i=e.length;i--;)~n.indexOf(e[i])||n.push(e[i]);return n}function Lt(t,e){var n,i,r;return i='[data-ractive-css~="{'+e+'}"]',r=function(t){var e,n,r,o,s,a,u,h=[];for(e=[];n=Du.exec(t);)e.push({str:n[0],base:n[1],modifiers:n[2]});for(o=e.map(It),u=e.length;u--;)a=o.slice(),r=e[u],a[u]=r.base+i+r.modifiers||"",s=o.slice(),s[u]=i+" "+s[u],h.push(a.join(" "),s.join(" "));return h.join(", ")},n=Uu.test(t)?t.replace(Uu,i):t.replace(Iu,"").replace(Vu,function(t,e){var n,i;return Mu.test(e)?t:(n=e.split(",").map(Vt),i=n.map(r).join(", ")+" ",t.replace(e,i))})}function Vt(t){return t.trim?t.trim():t.replace(/^\s+/,"").replace(/\s+$/,"")}function It(t){return t.str}function Dt(t){t&&t.constructor!==Object&&("function"==typeof t||("object"!=typeof t?l("data option must be an object or a function, `"+t+"` is not valid"):m("If supplied, options.data should be a plain JavaScript object - using a non-POJO as the root object may work, but is discouraged")))}function Mt(t,e){Dt(e);var n="function"==typeof t,i="function"==typeof e;return e||n||(e={}),n||i?function(){var r=i?Ut(e,this):e,o=n?Ut(t,this):t;return Bt(r,o)}:Bt(e,t)}function Ut(t,e){var n=t.call(e);if(n)return"object"!=typeof n&&l("Data function must return an object"),n.constructor!==Object&&v("Data function returned something other than a plain JavaScript object. This might work, but is strongly discouraged"),n}function Bt(t,e){if(t&&e){for(var n in e)n in t||(t[n]=e[n]);return t}return t||e}function qt(t){var e=_s(Gu);return e.parse=function(e,n){return Wt(e,n||t)},e}function Wt(t,e){if(!Hu)throw new Error("Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser");return Hu(t,e||this.options)}function Qt(t,e){var n;if(!Xo){if(e&&e.noThrow)return;throw new Error("Cannot retrieve template #"+t+" as Ractive is not running in a browser.")}if(zt(t)&&(t=t.substring(1)),!(n=document.getElementById(t))){if(e&&e.noThrow)return;throw new Error("Could not find template element with id #"+t)}if("SCRIPT"!==n.tagName.toUpperCase()){if(e&&e.noThrow)return;throw new Error("Template element with id #"+t+", must be a <script> element")}return"textContent"in n?n.textContent:n.innerHTML}function zt(t){return t&&"#"===t[0]}function Ht(t){return!("string"==typeof t)}function Kt(t){return t.defaults&&(t=t.defaults),Ku.reduce(function(e,n){return e[n]=t[n],e},{})}function Gt(t){var e,n=t._config.template;if(n&&n.fn)return e=$t(t,n.fn),e!==n.result?(n.result=e,e=Jt(e,t)):void 0}function $t(t,e){var n=Yt($u.getParseOptions(t));return e.call(t,n)}function Yt(t){var e=_s($u);return e.parse=function(e,n){return $u.parse(e,n||t)},e}function Jt(t,e){if("string"==typeof t)"#"===t[0]&&(t=$u.fromId(t)),t=Hu(t,$u.getParseOptions(e));else{if(void 0==t)throw new Error("The template cannot be "+t+".");if("number"!=typeof t.v)throw new Error("The template parser was passed a non-string template, but the template doesn't have a version.  Make sure you're passing in the template you think you are.");if(t.v!==ss)throw new Error("Mismatched template version (expected "+ss+", got "+t.v+") Please ensure you are using the latest version of Ractive.js in your build process as well as in your app")}return t}function Zt(t,e,n){if(e)for(var i in e)(n||!t.hasOwnProperty(i))&&(t[i]=e[i])}function Xt(t,e,n){if(!/_super/.test(n))return n;var i=function(){var t,r=te(i._parent,e),o="_super"in this,s=this._super;return this._super=r,t=n.apply(this,arguments),o?this._super=s:delete this._super,t};return i._parent=t,i._method=n,i}function te(t,e){var n,i;return e in t?(n=t[e],i="function"==typeof n?n:function(){return n}):i=xs,i}function ee(t,e,n){return"options."+t+" has been deprecated in favour of options."+e+"."+(n?" You cannot specify both options, please use options."+e+".":"")}function ne(t,e,n){if(e in t){if(n in t)throw new Error(ee(e,n,!0));m(ee(e,n)),t[n]=t[e]}}function ie(t){ne(t,"beforeInit","onconstruct"),ne(t,"init","onrender"),ne(t,"complete","oncomplete"),ne(t,"eventDefinitions","events"),o(t.adaptors)&&ne(t,"adaptors","adapt")}function re(t,e,n,i){sh(i);for(var r in i)if(ih.hasOwnProperty(r)){var o=i[r];"el"!==r&&"function"==typeof o?m(""+r+" is a Ractive option that does not expect a function and will be ignored","init"===t?n:null):n[r]=o}rh.forEach(function(r){r[t](e,n,i)}),Nu[t](e,n,i),Ju[t](e,n,i),Wu[t](e,n,i),oe(e.prototype,n,i)}function oe(t,e,n){for(var i in n)if(!nh[i]&&n.hasOwnProperty(i)){var r=n[i];"function"==typeof r&&(r=oh(t,i,r)),e[i]=r}}function se(t){var e={};return t.forEach(function(t){return e[t]=!0}),e}function ae(){this.dirtyValue=this.dirtyArgs=!0,this.bound&&"function"==typeof this.owner.bubble&&this.owner.bubble()}function ue(){var t;return 1===this.items.length?this.items[0].detach():(t=document.createDocumentFragment(),this.items.forEach(function(e){var n=e.detach();n&&t.appendChild(n)}),t)}function he(t){var e,n,i,r;if(this.items){for(n=this.items.length,e=0;n>e;e+=1)if(i=this.items[e],i.find&&(r=i.find(t)))return r;return null}}function ce(t,e){var n,i,r;if(this.items)for(i=this.items.length,n=0;i>n;n+=1)r=this.items[n],r.findAll&&r.findAll(t,e);return e}function le(t,e){var n,i,r;if(this.items)for(i=this.items.length,n=0;i>n;n+=1)r=this.items[n],r.findAllComponents&&r.findAllComponents(t,e);return e}function fe(t){var e,n,i,r;if(this.items){for(e=this.items.length,n=0;e>n;n+=1)if(i=this.items[n],i.findComponent&&(r=i.findComponent(t)))return r;return null}}function de(t){var e,n=t.index;return e=this.items[n+1]?this.items[n+1].firstNode():this.owner===this.root?this.owner.component?this.owner.component.findNextNode():null:this.owner.findNextNode(this)}function pe(){return this.items&&this.items[0]?this.items[0].firstNode():null}function me(t){var e;return(e=t.matchPattern(tc))?{t:Nh,v:e}:null}function ve(t){var e;return(e=Zh(t))?ic.test(e.v)?e.v:'"'+e.v.replace(/"/g,'\\"')+'"':(e=Xh(t))?e.v:(e=t.matchPattern(ec))?e:void 0}function ge(t){var e,n,i;return t.allowWhitespace(),(e=nc(t))?(i={key:e},t.allowWhitespace(),t.matchString(":")?(t.allowWhitespace(),(n=t.read())?(i.value=n.v,i):null):null):null}function ye(t,e,n,i){return i=i||0,t.map(function(t){var r,o,s;return t.text?t.text:t.fragments?t.fragments.map(function(t){return ye(t.items,e,n,i)}).join(""):(r=n+"-"+i++,s=t.keypath&&(o=t.root.viewmodel.wrapped[t.keypath.str])?o.value:t.getValue(),e[r]=s,"${"+r+"}")}).join("")}function be(){var t,e,n,i;return this.dirtyArgs&&(e=dc(this.items,t={},this.root._guid),n=fc("["+e+"]",t),i=n?n.value:[this.toString()],this.argsList=i,this.dirtyArgs=!1),this.argsList}function we(){var t=this;do if(t.pElement)return t.pElement.node;while(t=t.parent);return this.root.detached||this.root.el}function ke(){var t,e,n,i;return this.dirtyValue&&(e=dc(this.items,t={},this.root._guid),n=fc(e,t),i=n?n.value:this.toString(),this.value=i,this.dirtyValue=!1),this.value}function Ee(t){return t.replace(uc,function(t,e){var n;return n="#"!==e[0]?sc[e]:"x"===e[1]?parseInt(e.substring(2),16):parseInt(e.substring(1),10),n?String.fromCharCode(xe(n)):t})}function xe(t){return t?10===t?32:128>t?t:159>=t?ac[t-128]:55296>t?t:57343>=t?65533:65535>=t?t:65533:65533}function _e(t){return t.replace(lc,"&amp;").replace(hc,"&lt;").replace(cc,"&gt;")}function Ae(){this.registered&&this.root.viewmodel.unregister(this.keypath,this),this.resolver&&this.resolver.unbind()}function Ce(){return this.value}function Oe(t,e){for(var n,i=0;i<e.prop.length;i++)if(void 0!==(n=t[e.prop[i]]))return n}function Se(t,e){var n,i,r,o,s,a={},u=!1;for(e||(a.refs=n={});t;){if((s=t.owner)&&(i=s.indexRefs)){if(e&&(r=s.getIndexRef(e)))return a.ref={fragment:t,ref:r},a;if(!e)for(o in i)r=i[o],n[r.n]||(u=!0,n[r.n]={fragment:t,ref:r})}!t.parent&&t.owner&&t.owner.component&&t.owner.component.parentFragment&&!t.owner.component.instance.isolated?(a.componentBoundary=!0,t=t.owner.component.parentFragment):t=t.parent}return u?a:void 0}function Te(t,e,n){var i;return"@"===e.charAt(0)?new Cc(t,e,n):(i=Tc(t.parentFragment,e))?new Sc(t,i,n):new xc(t,e,n)}function Fe(t,e){var n,i;if(Rc[t])return Rc[t];for(i=[];e--;)i[e]="_"+e;return n=new Function(i.join(","),"return("+t+")"),Rc[t]=n,n}function je(t){return t.call()}function Pe(t,e){return t.replace(/_([0-9]+)/g,function(t,n){var i,r;return+n>=e.length?"_"+n:(i=e[n],void 0===i?"undefined":i.isSpecial?(r=i.value,"number"==typeof r?r:'"'+r+'"'):i.str)})}function Re(t){return _("${"+t.replace(/[\.\[\]]/g,"-").replace(/\*/,"#MUL#")+"}")}function Ne(t){return void 0!==t&&"@"!==t[0]}function Le(t,e){var n,i,r;if(t.__ractive_nowrap)return t;if(i="__ractive_"+e._guid,n=t[i])return n;if(/this/.test(t.toString())){As(t,i,{value:Nc.call(t,e),configurable:!0});for(r in t)t.hasOwnProperty(r)&&(t[i][r]=t[r]);return e._boundFunctions.push({fn:t,prop:i}),t[i]}return As(t,"__ractive_nowrap",{value:t}),t.__ractive_nowrap}function Ve(t){return t.value}function Ie(t){return void 0!=t}function De(t){t.forceResolution()}function Me(t,e){function n(e){t.resolve(e)}function i(e){var n=t.keypath;e!=n&&(t.resolve(e),void 0!==n&&t.fragments&&t.fragments.forEach(function(t){t.rebind(n,e)}))}var r,o,s;o=e.parentFragment,s=e.template,t.root=o.root,t.parentFragment=o,t.pElement=o.pElement,t.template=e.template,t.index=e.index||0,t.isStatic=e.template.s,t.type=e.template.t,t.registered=!1,(r=s.r)&&(t.resolver=jc(t,r,n)),e.template.x&&(t.resolver=new Lc(t,o,e.template.x,i)),e.template.rx&&(t.resolver=new Mc(t,e.template.rx,i)),t.template.n!==Dh||t.hasOwnProperty("value")||t.setValue(void 0)}function Ue(t){var e,n,i;return t&&t.isSpecial?(this.keypath=t,void this.setValue(t.value)):(this.registered&&(this.root.viewmodel.unregister(this.keypath,this),this.registered=!1,e=!0),this.keypath=t,void 0!=t&&(n=this.root.viewmodel.get(t),this.root.viewmodel.register(t,this),this.registered=!0),this.setValue(n),void(e&&(i=this.twowayBinding)&&i.rebound()))}function Be(t,e){this.fragments&&this.fragments.forEach(function(n){return n.rebind(t,e)}),this.resolver&&this.resolver.rebind(t,e)}function qe(){this.parentFragment.bubble()}function We(){var t;return 1===this.fragments.length?this.fragments[0].detach():(t=document.createDocumentFragment(),this.fragments.forEach(function(e){t.appendChild(e.detach())}),t)}function Qe(t){var e,n,i;for(n=this.fragments.length,e=0;n>e;e+=1)if(i=this.fragments[e].find(t))return i;return null}function ze(t,e){var n,i;for(i=this.fragments.length,n=0;i>n;n+=1)this.fragments[n].findAll(t,e)}function He(t,e){var n,i;for(i=this.fragments.length,n=0;i>n;n+=1)this.fragments[n].findAllComponents(t,e)}function Ke(t){var e,n,i;for(n=this.fragments.length,e=0;n>e;e+=1)if(i=this.fragments[e].findComponent(t))return i;return null}function Ge(t){return this.fragments[t.index+1]?this.fragments[t.index+1].firstNode():this.parentFragment.findNextNode(this)}function $e(){var t,e,n;if(t=this.fragments.length)for(e=0;t>e;e+=1)if(n=this.fragments[e].firstNode())return n;return this.parentFragment.findNextNode(this)}function Ye(t){var e,n,i,r,o,s,a,u=this;if(!this.shuffling&&!this.unbound&&this.currentSubtype===Mh){if(this.shuffling=!0,ya.scheduleTask(function(){return u.shuffling=!1}),e=this.parentFragment,o=[],t.forEach(function(t,e){var i,r,s,a,h;return t===e?void(o[t]=u.fragments[e]):(i=u.fragments[e],void 0===n&&(n=e),-1===t?(u.fragmentsToUnrender.push(i),void i.unbind()):(r=t-e,s=u.keypath.join(e),a=u.keypath.join(t),i.index=t,(h=i.registeredIndexRefs)&&h.forEach(Je),i.rebind(s,a),void(o[t]=i)))}),r=this.root.viewmodel.get(this.keypath).length,void 0===n){if(this.length===r)return;n=this.length}for(this.length=this.fragments.length=r,this.rendered&&ya.addView(this),s={template:this.template.f,root:this.root,owner:this},i=n;r>i;i+=1)a=o[i],a||this.fragmentsToCreate.push(i),this.fragments[i]=a}}function Je(t){t.rebind("","")}function Ze(){var t=this;return this.docFrag=document.createDocumentFragment(),this.fragments.forEach(function(e){return t.docFrag.appendChild(e.render())}),this.renderedFragments=this.fragments.slice(),this.fragmentsToRender=[],this.rendered=!0,this.docFrag}function Xe(t){var e,n,i=this;this.updating||(this.updating=!0,this.keypath&&(e=this.root.viewmodel.wrapped[this.keypath.str])&&(t=e.get()),this.fragmentsToCreate.length?(n={template:this.template.f||[],root:this.root,pElement:this.pElement,owner:this},this.fragmentsToCreate.forEach(function(t){var e;n.context=i.keypath.join(t),n.index=t,e=new rv(n),i.fragmentsToRender.push(i.fragments[t]=e)}),this.fragmentsToCreate.length=0):en(this,t)&&(this.bubble(),this.rendered&&ya.addView(this)),this.value=t,this.updating=!1)}function tn(t,e,n){if(e===Mh&&t.indexRefs&&t.indexRefs[0]){var i=t.indexRefs[0];(n&&"i"===i.t||!n&&"k"===i.t)&&(n||(t.length=0,t.fragmentsToUnrender=t.fragments.slice(0),t.fragmentsToUnrender.forEach(function(t){return t.unbind()}))),i.t=n?"k":"i"}t.currentSubtype=e}function en(t,e){var n={template:t.template.f||[],root:t.root,pElement:t.parentFragment.pElement,owner:t};if(t.hasContext=!0,t.subtype)switch(t.subtype){case Ih:return t.hasContext=!1,an(t,e,!1,n);case Dh:return t.hasContext=!1,an(t,e,!0,n);case Uh:return sn(t,n);case Bh:return on(t,e,n);case Mh:if(h(e))return tn(t,t.subtype,!0),rn(t,e,n)}return t.ordered=!!s(e),t.ordered?(tn(t,Mh,!1),nn(t,e,n)):h(e)||"function"==typeof e?t.template.i?(tn(t,Mh,!0),rn(t,e,n)):(tn(t,Uh,!1),sn(t,n)):(tn(t,Ih,!1),t.hasContext=!1,an(t,e,!1,n))}function nn(t,e,n){var i,r,o;if(r=e.length,r===t.length)return!1;if(r<t.length)t.fragmentsToUnrender=t.fragments.splice(r,t.length-r),t.fragmentsToUnrender.forEach(K);else if(r>t.length)for(i=t.length;r>i;i+=1)n.context=t.keypath.join(i),n.index=i,o=new rv(n),t.fragmentsToRender.push(t.fragments[i]=o);return t.length=r,!0}function rn(t,e,n){var i,r,o,s,a,u;for(o=t.hasKey||(t.hasKey={}),r=t.fragments.length;r--;)s=t.fragments[r],s.key in e||(a=!0,s.unbind(),t.fragmentsToUnrender.push(s),t.fragments.splice(r,1),o[s.key]=!1);for(r=t.fragments.length;r--;)s=t.fragments[r],s.index!==r&&(s.index=r,(u=s.registeredIndexRefs)&&u.forEach(cn));r=t.fragments.length;for(i in e)o[i]||(a=!0,n.context=t.keypath.join(i),n.key=i,n.index=r++,s=new rv(n),t.fragmentsToRender.push(s),t.fragments.push(s),o[i]=!0);return t.length=t.fragments.length,a}function on(t,e,n){return e?sn(t,n):un(t)}function sn(t,e){var n;return t.length?void 0:(e.context=t.keypath,e.index=0,n=new rv(e),t.fragmentsToRender.push(t.fragments[0]=n),t.length=1,!0)}function an(t,e,n,i){var r,o,a,u,c;if(o=s(e)&&0===e.length,a=!1,!s(e)&&h(e)){a=!0;for(c in e){a=!1;break}}return r=n?o||a||!e:e&&!o&&!a,r?t.length?t.length>1?(t.fragmentsToUnrender=t.fragments.splice(1),t.fragmentsToUnrender.forEach(K),!0):void 0:(i.index=0,u=new rv(i),t.fragmentsToRender.push(t.fragments[0]=u),t.length=1,!0):un(t)}function un(t){return t.length?(t.fragmentsToUnrender=t.fragments.splice(0,t.fragments.length).filter(hn),t.fragmentsToUnrender.forEach(K),t.length=t.fragmentsToRender.length=0,!0):void 0}function hn(t){return t.rendered}function cn(t){t.rebind("","")}function ln(t){var e,n,i;for(e="",n=0,i=this.length,n=0;i>n;n+=1)e+=this.fragments[n].toString(t);return e}function fn(){var t=this;this.fragments.forEach(K),this.fragmentsToRender.forEach(function(e){return V(t.fragments,e)}),this.fragmentsToRender=[],wc.call(this),this.length=0,this.unbound=!0}function dn(t){this.fragments.forEach(t?pn:mn),this.renderedFragments=[],this.rendered=!1}function pn(t){t.unrender(!0)}function mn(t){t.unrender(!1)}function vn(){var t,e,n,i,r,o,s;for(n=this.renderedFragments;t=this.fragmentsToUnrender.pop();)t.unrender(!0),n.splice(n.indexOf(t),1);for(;t=this.fragmentsToRender.shift();)t.render();for(this.rendered&&(r=this.parentFragment.getNode()),s=this.fragments.length,o=0;s>o;o+=1)t=this.fragments[o],e=n.indexOf(t,o),e!==o?(this.docFrag.appendChild(t.detach()),-1!==e&&n.splice(e,1),n.splice(o,0,t)):this.docFrag.childNodes.length&&(i=t.firstNode(),r.insertBefore(this.docFrag,i));this.rendered&&this.docFrag.childNodes.length&&(i=this.parentFragment.findNextNode(this),r.insertBefore(this.docFrag,i)),this.renderedFragments=this.fragments.slice()}function gn(){var t,e;if(this.docFrag){for(t=this.nodes.length,e=0;t>e;e+=1)this.docFrag.appendChild(this.nodes[e]);return this.docFrag}}function yn(t){var e,n,i,r;for(n=this.nodes.length,e=0;n>e;e+=1)if(i=this.nodes[e],1===i.nodeType){if(fs(i,t))return i;if(r=i.querySelector(t))return r}return null}function bn(t,e){var n,i,r,o,s,a;for(i=this.nodes.length,n=0;i>n;n+=1)if(r=this.nodes[n],1===r.nodeType&&(fs(r,t)&&e.push(r),o=r.querySelectorAll(t)))for(s=o.length,a=0;s>a;a+=1)e.push(o[a])}function wn(){return this.rendered&&this.nodes[0]?this.nodes[0]:this.parentFragment.findNextNode(this)}function kn(t){return vl[t]||(vl[t]=ls(t))}function En(t){var e,n,i;t&&"select"===t.name&&t.binding&&(e=I(t.node.options).filter(xn),t.getAttribute("multiple")?i=e.map(function(t){return t.value}):(n=e[0])&&(i=n.value),void 0!==i&&t.binding.setValue(i),t.bubble())}function xn(t){return t.selected}function _n(){if(this.rendered)throw new Error("Attempted to render an item that was already rendered");return this.docFrag=document.createDocumentFragment(),this.nodes=gl(this.value,this.parentFragment.getNode(),this.docFrag),yl(this.pElement),this.rendered=!0,this.docFrag}function An(t){var e;(e=this.root.viewmodel.wrapped[this.keypath.str])&&(t=e.get()),t!==this.value&&(this.value=t,this.parentFragment.bubble(),this.rendered&&ya.addView(this))}function Cn(){return void 0!=this.value?Ee(""+this.value):""}function On(t){this.rendered&&t&&(this.nodes.forEach(e),this.rendered=!1)}function Sn(){var t,e;if(this.rendered){for(;this.nodes&&this.nodes.length;)t=this.nodes.pop(),
t.parentNode.removeChild(t);e=this.parentFragment.getNode(),this.nodes=gl(this.value,e,this.docFrag),e.insertBefore(this.docFrag,this.parentFragment.findNextNode(this)),yl(this.pElement)}}function Tn(){var t,e=this.node;return e?((t=e.parentNode)&&t.removeChild(e),e):void 0}function Fn(){return null}function jn(){return this.node}function Pn(t){return this.attributes&&this.attributes[t]?this.attributes[t].value:void 0}function Rn(){var t=this.useProperty||!this.rendered?this.fragment.getValue():this.fragment.toString();a(t,this.value)||("id"===this.name&&this.value&&delete this.root.nodes[this.value],this.value=t,"value"===this.name&&this.node&&(this.node._ractive.value=t),this.rendered&&ya.addView(this))}function Nn(t){var e=t.fragment.items;if(1===e.length)return e[0].type===_h?e[0]:void 0}function Ln(t){return this.type=Fh,this.element=t.element,this.root=t.root,Ql(this,t.name),this.isBoolean=rc.test(this.name),t.value&&"string"!=typeof t.value?(this.parentFragment=this.element.parentFragment,this.fragment=new rv({template:t.value,root:this.root,owner:this}),this.value=this.fragment.getValue(),this.interpolator=zl(this),this.isBindable=!!this.interpolator&&!this.interpolator.isStatic,void(this.ready=!0)):void(this.value=this.isBoolean?!0:t.value||"")}function Vn(t,e){this.fragment&&this.fragment.rebind(t,e)}function In(t){var e;this.node=t,t.namespaceURI&&t.namespaceURI!==is.html||(e=$l[this.name]||this.name,void 0!==t[e]&&(this.propertyName=e),(this.isBoolean||this.isTwoway)&&(this.useProperty=!0),"value"===e&&(t._ractive.value=this.value)),this.rendered=!0,this.update()}function Dn(){var t=this,e=t.name,n=t.namespacePrefix,i=t.value,r=t.interpolator,o=t.fragment;if(("value"!==e||"select"!==this.element.name&&"textarea"!==this.element.name)&&("v